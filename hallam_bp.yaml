blocks:
    five_one: &block_5/1
        fuel: &fuel_bundle
            # There are 18 fuel pins in each process tube. 
            # In the 5/1 cell, there are 5 full process tubes of fuel
            # So the multiplicity of this and associated things is 18*5 = 50+40=90
            shape: Circle
            material: UMo
            od: 1.4986 
            mult: 90
            # The avg fuel temperature is 890 °F
            THot: 476.67
        clad: &fuel_clad
            shape: Circle
            material: SS304
            od: 1.6764
            id: 1.6252
            mult: fuel.mult
        bond:  &fuel_bond
            shape: Circle
            material: Sodium
            id: fuel.od
            od: clad.id
            mult: fuel.mult
        spacers: &fuel_spacers
            # spacers at 1 ft intervals, eq area= 0.0285 in²
            shape: Circle
            od: 0.2419
            material: SS304
            mult: 1
        process tube: &process_tube
            material: Zircalloy2
            shape: Circle
            od: 11.176
            id: 10.668
            mult: 5
        moderator:  &moderator
            # the way the hex cell cuts the moderator blocks exactly equals 3 mod blocks
            material: Graphite
            shape: ScallopedHex
            # "The graphite is a prism of hexagonal XS measuring 16 in across flats"
            op: 40.64
            # "The average moderator temperature is 850 °F"
            Thot: 454.44
            mult: 3
        moderator coolant edge: &moderator_coolant_edge
            # gaps between moderator/moderator 
            # "There is a nominal 0.160" gap between edges of adjacent moderator elements"
            # See also: moderator coolant annulus
            # If logs are 16" , then pitch is that + 2*0.016" + 2*0.160" = 18.048"
            # In hexagons, p = sqrt(3)*s so the side length is 26.466845 cm
            # The length of these sections will be that minus the diameter of the process
            # tubes (which is 4.4") plus 2x the sodium thickness (0.016"). 
            # So, 15.291 cm.
            # There are 9 of these straight sections per 5/1 unit cell.
            material: Sodium
            shape: Rectangle
            width: 0.4064
            length: 15.291
            mult: 9
        moderator coolant annulus: &moderator_coolant_annulus
            # the sodium outside the process tubes.
            # assume 0.160" gap as well
            # id = 4.4"+2*0.160"
            material: Sodium
            shape: Circle
            id: process tube.od
            od: 11.9888
            mult: 5
        center tube: &center_tube
            # empty tube in the middle of each fuel cluster
            shape: Circle
            material: SS304
            od: 1.7272
            id: 1.6256
            mult: 5
        center hole: &center_hole
            # the void in the center tube
            shape: Circle
            material: Void
            mult: 5
        coolant:
            shape: DerivedShape
            material: Sodium
        cr thimble: 
            material: Zircalloy2
            shape: Circle
            id: 9.0424
            od: 9.51484
        cr outer clad:
            material: HastelloyX
            shape: Circle
            id: 8.3566
            od: 8.67664
        control:
            material: RareEarths
            shape: Circle
            od: 8.3566
            id: 7.7216
        cr inner clad:
            material: HastelloyX
            shape: Circle
            od: 7.7216
            id: 7.40156
        cr retainer tube:
            material: SS304
            shape: Circle
            od: 7.26186
            id: 6.30682

    peripheral fuel a: &block_peripheral_a
        # Outer blocks with 1.666 fuel, 2.66 reflectors, 1.666 dummys
        # There are three of these in 1/3 symmetry (green)
        fuel:
            # 1.666 fuel tubes is 1.6666* 18  = 30 fuel pins
            <<: *fuel
            mult: 30
        clad:
            # These are linked to the fuel which has the updated multiplicity already
            <<: *fuel_clad
        bond:
            <<: *fuel_bond
        spacers:
            <<: *fuel_spacers
        process tube: 
            <<: *process_tube
            mult: 3.3333
        moderator: 
            <<: *moderator
        moderator coolant edge:
            <<: *moderator_coolant_edge
        moderator coolant annulus:
            <<: *moderator_coolant_annulus
        center tube:
            <<: *center_tube
            mult: 1.6666
        center hole:
            <<: *center_hole
            mult: 1.6666
        dummy: &dummy
            # "reflector filler and dummy elements are cylindrical logs of mold-grade graphite
            # 4.32 and 3.92 in OD respectively canned in 0.040 in. stainless steel"
            # Dummy elements are used in inner locations inside process tubes
            # Reflector filler elements are permanently placed in the outermost region of the
            # core. It is probably safe to assume reflectors do not have process tubes but
            # dummys do.
            shape: Circle
            material: Graphite
            od: 9.9568
            mult: 1.6666
        dummy clad: &dummy_clad
            # od is 3.92 + 2* 0.04"
            shape: Circle
            material: SS304
            id: dummy.od
            od: 10.16
            mult: dummy.mult
        reflector: &reflector
            shape: Circle
            material: Graphite
            od: 10.9728
            mult: 2.6666
        reflector clad: &reflector_clad
            # od is 4.32 + 2* 0.04"
            shape: Circle
            material: SS304
            id: reflector.od
            od: 11.176
            mult: reflector.mult
        coolant:
            shape: DerivedShape
            material: Sodium
    peripheral fuel b: &block_peripheral_b
        # Outer blocks with 4.3333 fuel, 0.33 reflectors, 1.333 dummys
        # There are 6 of these (red)
        fuel:
            # 4.3333 fuel tubes is 78 fuel pins
            <<: *fuel
            mult: 78
        clad:
            # These are linked to the fuel which has the updated multiplicity already
            <<: *fuel_clad
        bond:
            <<: *fuel_bond
        spacers:
            <<: *fuel_spacers
        process tube:
            <<: *process_tube
            # 4.3333 + 1.333 tubes 
            mult: 5.666
        moderator: 
            <<: *moderator
        moderator coolant edge:
            <<: *moderator_coolant_edge
        moderator coolant annulus:
            <<: *moderator_coolant_annulus
        center tube:
            <<: *center_tube
            mult: 4.3333
        center hole:
            <<: *center_hole
            mult: 4.3333
        dummy: 
            <<: *dummy
            mult: 1.3333
        dummy clad: 
            <<: *dummy_clad
        reflector: 
            <<: *reflector
            mult: 0.3333
        reflector clad: 
            <<: *reflector_clad
        coolant:
            shape: DerivedShape
            material: Sodium
    peripheral fuel c: &block_peripheral_c
        # Outer blocks with 4.3333 fuel, 0.66 reflectors, 1.0 dummys
        # There are 6 of these (orange)
        fuel:
            # 4.3333 fuel tubes is 78 fuel pins
            <<: *fuel
            mult: 78
        clad:
            <<: *fuel_clad
        bond:
            <<: *fuel_bond
        spacers:
            <<: *fuel_spacers
        process tube: 
            <<: *process_tube
            mult: 5.3333
        moderator: 
            <<: *moderator
        moderator coolant edge:
            <<: *moderator_coolant_edge
        moderator coolant annulus:
            <<: *moderator_coolant_annulus
        center tube:
            <<: *center_tube
            mult: 4.3333
        center hole:
            <<: *center_hole
            mult: 4.3333
        dummy: 
            <<: *dummy
            mult: 1.0
        dummy clad: 
            <<: *dummy_clad
        reflector: 
            <<: *reflector
            mult: 0.6666
        reflector clad: 
            <<: *reflector_clad
        coolant:
            shape: DerivedShape
            material: Sodium
    peripheral fuel d: &block_peripheral_d
        # Outer blocks with 2.6666 fuel, 1.66 reflectors, 1.0 sodium temperature device
        # Assume temperature measurement is inside a regular process tube
        # There are 3 of these (blue)
        fuel:
            # 2.6666 fuel tubes 
            <<: *fuel
            mult: 48
        clad:
            <<: *fuel_clad
        bond:
            <<: *fuel_bond
        spacers:
            <<: *fuel_spacers
        process tube: 
            <<: *process_tube
            mult: 3.6666
        moderator: 
            <<: *moderator
        moderator coolant edge:
            <<: *moderator_coolant_edge
        moderator coolant annulus:
            <<: *moderator_coolant_annulus
        center tube:
            <<: *center_tube
            mult: 2.6666
        center hole:
            <<: *center_hole
            mult: 2.6666
        sodium instrument: 
            shape: Circle
            material: Sodium
            od: process tube.id
            mult: 1.0
        reflector: 
            <<: *reflector
            mult: 1.6666
        reflector clad: 
            <<: *reflector_clad
        coolant:
            shape: DerivedShape
            material: Sodium
    reflector: &block_reflector
        # on the very outside, these contain only reflector components, moderator, and
        # sodium. Hmm, actually 6 of them contain 1/3 of a fuel bundle and 12 do not. 
        # Let's smear them for starters to get fuel mass right. Symmetry should keep
        # prevent big perturbations in results
        #
        # 2nd attempt (in 1/3 core)
        # Fuels: 0.3333+2.6666+0.33333+1.66666 = 5 [confirmed]
        # Dummys: 0.333+1.6666+0.3333 = 2.3333 [confirmed]
        # Reflectors:  1.5 + 0.666  + 2.6666 + 1.666+ 2.6666 +3.6666 + 2.66666 + 2.66666 + 2.6666 +  1.5 = 22.3333 [oops]
        # Moderators: 16 [oops]
        # assemblies: 8
        #
        # Mults per assembly:
        # fuel pins: 11.25
        # fuel bundles: 0.625
        # fuel process tubes: 0.625
        # dummy: 0.29166
        # reflectors: 2.79166
        # moderators: 2
        fuel:
            <<: *fuel
            mult: 11.25
        clad:
            <<: *fuel_clad
        bond:
            <<: *fuel_bond
        spacers:
            <<: *fuel_spacers
        process tube: 
            <<: *process_tube
            # fuel bundles + dummy bundles
            mult: 0.91666
        moderator: 
            <<: *moderator
            mult: 2
        moderator coolant edge:
            <<: *moderator_coolant_edge
            mult: 6
        moderator coolant annulus:
            <<: *moderator_coolant_annulus
        center tube:
            <<: *center_tube
            mult: 0.625
        center hole:
            <<: *center_hole
            mult: 0.625
        sodium instrument: 
            # one per 8 reflector units, so 1/8=0.125
            shape: Circle
            material: Sodium
            od: process tube.id
            mult: 0.125
        reflector: 
            <<: *reflector
            mult: 2.79166
        reflector clad: 
            <<: *reflector_clad
        coolant:
            shape: DerivedShape
            material: Sodium
        dummy:
            <<: *dummy
            mult: 0.291666
        dummy clad:
            <<: *dummy_clad
assemblies:
    heights: 


